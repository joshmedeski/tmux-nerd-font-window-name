#!/usr/bin/env bash

NAME=$1
SHOW_NAME="$(tmux show -gqv '@tmux-nerd-font-window-name-show-name')"

get_fallback_icon() {
  local default_fallback_icon="ó°’“"
  local fallback_icon
  fallback_icon="$(tmux show -gqv '@tmux-nerd-font-window-name-fallback')"
  if [ "$fallback_icon" != "" ]; then
    echo "$fallback_icon"
  else
    echo "$default_fallback_icon"
  fi
}

FALLBACK_ICON="$(get_fallback_icon)"

get_icon() {
  icon="$(tmux show -gqv @tmux-nerd-font-window-name-custom-$NAME)"
  if [ "$icon" != "" ] ; then
    echo $icon
  else
    echo $FALLBACK_ICON
  fi
}

ICON=$(get_icon)

if [ "$SHOW_NAME" = true ]; then
  echo "$ICON" "$NAME"
else
  echo "$ICON"
fi
