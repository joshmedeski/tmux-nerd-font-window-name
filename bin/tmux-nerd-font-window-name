#!/usr/bin/env bash

NAME="$1"
# ACTUAL CONFIG DIRECTORY
# CONFIG_FILE='$HOME/.config/tmux-icons.yml'

# TEST DIRECTORY - DO NOT USE IN PROD
CONFIG_FILE='./tmux-icons.yml'

SHOW_NAME="$(yq '.config.show-icons' $CONFIG_FILE)"

FALLBACK_ICON="$(yq '.config.fallback-icon' $CONFIG_FILE)"

get_icon() {
  value_name=".icons.$NAME"
  icon="$(yq $value_name $CONFIG_FILE)"
  if [ "$icon" != "null" ] ; then
    echo $icon
  else
    echo $FALLBACK_ICON
  fi
}

ICON=$(get_icon)

if [ "$SHOW_NAME" = true ]; then
  echo "$ICON" "$NAME"
else
  echo "$ICON"
fi
